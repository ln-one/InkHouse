# InkHouse 图书馆管理系统 - 敏捷开发文档

## 目录

1. [项目概述](#1-项目概述)
2. [敏捷核心思想与实践](#2-敏捷核心思想与实践)
3. [团队组成与角色](#3-团队组成与角色)
4. [需求优先级矩阵 (MoSCoW)](#4-需求优先级矩阵-moscow)
5. [产品待办事项](#5-产品待办事项)
6. [迭代规划与时间表](#6-迭代规划与时间表)
7. [迭代开发与持续集成](#7-迭代开发与持续集成)
8. [敏捷仪式与会议](#8-敏捷仪式与会议)
9. [风险管理](#9-风险管理)
10. [质量保证](#10-质量保证)
11. [项目成果与总结](#11-项目成果与总结)
12. [经验教训与改进](#12-经验教训与改进)
13. [附录](#附录)

## 1. 项目概述

### 1.1 项目简介
InkHouse 是一个跨平台图书馆管理系统，基于 C#、Avalonia UI 和 MySQL 开发，支持 Windows、Linux 和 macOS 环境。系统提供现代化、优雅且易用的界面，旨在简化图书馆的日常管理工作，提高工作效率。

### 1.2 项目目标
- 开发一个功能完善的图书馆管理系统
- 实现图书、用户、借阅和座位的全面管理
- 提供直观的用户界面和良好的用户体验
- 确保系统的安全性、可靠性和可扩展性
- 支持跨平台运行，满足不同环境的需求
- 在6个月内完成开发并交付可用产品

### 1.3 项目范围
- 用户认证与授权管理
- 图书管理（包括图书类型分类）
- 借阅管理
- 座位预约系统
- 统计报表与分析
- 系统设置与配置

### 1.4 项目背景与业务价值
图书馆管理系统是现代图书馆不可或缺的工具，能够显著提高图书馆的运营效率和用户体验。InkHouse 项目旨在提供一个现代化、跨平台的解决方案，解决传统系统在多平台支持、用户体验和功能扩展方面的局限性。

项目的主要业务价值包括：
- 提高图书馆资源管理效率
- 改善读者借阅和座位预约体验
- 提供数据驱动的决策支持
- 降低系统维护成本
- 支持多平台部署，满足不同环境需求

## 2. 敏捷核心思想与实践

### 2.1 敏捷价值观
在 InkHouse 项目中，我们遵循敏捷宣言的四大价值观：

1. **个体和互动高于流程和工具**：我们重视团队成员之间的直接沟通和协作，而不是过度依赖工具和流程。
2. **工作的软件高于详尽的文档**：我们优先交付可工作的软件，而不是花费过多时间在详尽文档上。
3. **客户协作高于合同谈判**：我们与客户保持密切合作，及时获取反馈并调整方向。
4. **响应变化高于遵循计划**：我们能够灵活应对需求变化，而不是固守最初的计划。

### 2.2 敏捷原则应用
我们在项目中应用了以下敏捷原则：

- **早期和持续交付有价值的软件**：每个迭代结束都交付可用的功能
- **欢迎需求变更**：即使在开发后期也能灵活调整需求
- **经常交付工作的软件**：2-3周一个迭代，确保持续交付
- **业务人员和开发人员必须在整个项目中每天一起工作**：通过每日站会和紧密协作实现
- **面对面交谈是最有效的沟通方式**：团队共处一室，促进直接沟通
- **可持续的开发节奏**：合理安排工作量，避免团队倦怠
- **技术卓越和良好设计**：通过代码审查和持续重构提高质量
- **简单性**：只开发必要的功能，避免过度设计
- **自组织团队**：团队自主决定如何完成工作
- **定期反思如何更有效**：通过迭代回顾持续改进

### 2.3 采用的敏捷方法
InkHouse 项目采用 **Scrum** 作为主要的敏捷框架，并结合了 **看板(Kanban)** 的可视化工作流管理和 **极限编程(XP)** 的技术实践。

## 3. 团队组成与角色

### 3.1 团队结构
InkHouse 项目团队采用跨功能团队结构，由以下成员组成：

| 角色 | 姓名 | 职责 |
|------|------|------|
| 产品负责人 | 吴昶之 | 定义产品愿景，管理产品待办事项，设定优先级 |
| Scrum Master | 张春冉 | 引导团队遵循 Scrum 流程，消除障碍 |
| 开发团队 | 张春冉 | 全栈开发，UI/UX设计与实现，系统架构 |
|  | 邓成杰 | 全栈开发，数据库设计，测试自动化 |
|  | 吴昶之 | 全栈开发，测试自动化 |
| 测试专家 | 邓成杰| 质量保证，测试策略 |

### 3.2 团队工作协议
- **工作时间**：核心工作时间 9:30-16:30，弹性工作制
- **沟通方式**：
  - 每日站会：每天上午 9:30，时长 15 分钟
  - 即时通讯：使用微信进行日常沟通
  - 代码协作：使用 Github 进行代码管理和审查
- **决策机制**：
  - 技术决策：由开发团队共同讨论决定
  - 产品决策：由产品负责人在咨询团队后决定
  - 流程决策：由 Scrum Master 引导团队共同决定


## 4. 需求优先级矩阵 (MoSCoW)

我们使用 MoSCoW 方法对需求进行优先级划分，确保团队专注于最重要的功能：

### 4.1 Must Have（必须有）
这些是项目成功所必需的核心功能，没有它们项目将无法交付：

- 用户认证系统（登录/注册/角色管理）
- 图书基本管理（添加/编辑/删除/查看）
- 基本借阅功能（借书/还书）
- 数据库连接和基础架构
- 基本搜索功能
- 用户界面框架和导航

### 4.2 Should Have（应该有）
这些是重要但不是绝对必要的功能，如果时间允许应该实现：

- 图书类型分类和过滤
- 座位预约基本功能
- 借阅历史记录
- 基本统计仪表板
- 用户个人资料
- 图书状态跟踪（可借/已借出/维护中）

### 4.3 Could Have（可以有）
这些是有价值但可以推迟的功能：

- 高级搜索和过滤
- 座位签到/签退功能
- 用户借阅统计和完成率
- 图书封面上传和显示
- 逾期提醒功能
- 快速修复指南

### 4.4 Won't Have（暂不考虑）
这些是已确定不在当前版本范围内的功能：

- 电子书阅读功能
- 多语言支持
- 移动应用程序
- 社交分享功能
- 在线支付功能
- 第三方系统集成

### 4.5 优先级调整机制
优先级不是一成不变的，我们建立了以下机制来调整优先级：

- 每个迭代开始前，产品负责人可以根据反馈调整优先级
- 重大优先级变更需要在迭代计划会议上讨论
- 任何团队成员都可以提出优先级调整建议
- 优先级调整需要考虑业务价值、技术依赖和实现成本

## 5. 产品待办事项

### 5.1 用户故事

#### 认证与授权
- 作为管理员，我希望能够登录系统，以便管理图书馆资源
- 作为普通用户，我希望能够注册账号，以便使用图书馆服务
- 作为用户，我希望能够安全登录系统，以便访问个人功能
- 作为用户，我希望能够安全登出系统，以保护我的账户安全

#### 图书管理
- 作为管理员，我希望能够添加新图书，以便更新图书馆藏
- 作为管理员，我希望能够编辑图书信息，以便保持数据准确
- 作为管理员，我希望能够删除图书，以便移除不再需要的资源
- 作为管理员，我希望能够按类型分类图书，以便更好地组织图书馆藏
- 作为用户，我希望能够浏览图书列表，以便找到我感兴趣的书籍
- 作为用户，我希望能够搜索图书，以便快速找到特定书籍
- 作为用户，我希望能够按类型筛选图书，以便更容易找到特定类型的书籍

#### 借阅管理
- 作为用户，我希望能够借阅图书，以便阅读我感兴趣的书籍
- 作为用户，我希望能够归还图书，以便完成借阅流程
- 作为用户，我希望能够查看我的借阅历史，以便跟踪我的阅读活动
- 作为管理员，我希望能够查看所有借阅记录，以便监控图书流通情况
- 作为管理员，我希望能够处理逾期图书，以便维护图书馆规则

#### 座位预约
- 作为用户，我希望能够查看可用座位，以便选择合适的学习位置
- 作为用户，我希望能够预约座位，以便确保有地方学习
- 作为用户，我希望能够签到和签退，以便正确使用预约的座位
- 作为用户，我希望能够查看我的座位预约历史，以便跟踪我的使用情况
- 作为管理员，我希望能够管理座位状态，以便维护座位系统

#### 统计与报表
- 作为管理员，我希望能够查看系统概览，以便了解图书馆整体情况
- 作为管理员，我希望能够生成统计报表，以便分析图书馆运营数据
- 作为用户，我希望能够查看个人统计信息，以便了解我的使用情况和完成率


### 5.2 验收标准示例

以下是部分用户故事的验收标准示例：

**用户故事**：作为普通用户，我希望能够注册账号，以便使用图书馆服务

**验收标准**：
1. 用户可以通过注册页面创建新账号
2. 注册表单必须包含：用户名、密码、确认密码字段
3. 系统必须验证用户名唯一性
4. 密码必须至少8个字符，包含字母和数字
5. 注册成功后，用户被重定向到登录页面
6. 注册失败时，显示适当的错误消息

**用户故事**：作为用户，我希望能够借阅图书，以便阅读我感兴趣的书籍

**验收标准**：
1. 用户可以在图书详情页面点击"借阅"按钮
2. 系统检查图书是否可借（库存>0）
3. 系统检查用户是否有未归还的相同图书
4. 借阅成功后，图书可借数量减1
5. 系统创建借阅记录，包含借阅日期和预期归还日期
6. 用户可以在"我的借阅"页面看到新借的图书

## 6. 迭代规划与时间表

### 6.1 项目时间线
- **项目启动**：2025年月7月6日
- **开发阶段**：2025年7月6日 - 2025年7月15日
- **测试与优化**：2025年7月16日 - 2025年7月17日
- **项目总结**：2025年7月18日

## 7. 迭代开发与持续集成

### 7.1 开发流程
我们采用以下开发流程确保代码质量和持续交付：

1. **需求分析**：产品负责人和团队共同分析用户故事
2. **任务分解**：将用户故事分解为具体任务
3. **设计与编码**：团队成员进行设计和编码
4. **代码审查**：至少一名团队成员审查代码
5. **测试**：编写和执行自动化测试
6. **集成**：将代码集成到主分支
7. **部署**：部署到测试环境
8. **验收**：产品负责人验收功能

### 7.2 持续集成/持续部署 (CI/CD) 流程

我们使用 Github CI/CD 实现自动化构建、测试和部署：

#### 7.2.1 CI/CD 管道配置
```yaml
stages:
  - build
  - test
  - package
  - deploy

build:
  stage: build
  script:
    - dotnet restore
    - dotnet build

unit_tests:
  stage: test
  script:
    - dotnet test

integration_tests:
  stage: test
  script:
    - dotnet test --filter Category=Integration

package:
  stage: package
  script:
    - ./build-packages.sh
  artifacts:
    paths:
      - dist/

deploy_test:
  stage: deploy
  script:
    - ./deploy.sh test
  environment:
    name: test
  only:
    - develop

deploy_staging:
  stage: deploy
  script:
    - ./deploy.sh staging
  environment:
    name: staging
  only:
    - main
  when: manual
```

#### 7.2.2 分支策略
我们采用 GitFlow 分支模型：

- **main**: 生产就绪代码
- **develop**: 开发分支，包含最新功能
- **feature/***:  新功能开发
- **bugfix/***:  错误修复
- **release/***:  发布准备

#### 7.2.3 自动化测试
- **单元测试**：使用 xUnit 测试框架
- **集成测试**：测试组件间交互
- **UI 测试**：使用 Avalonia UI 测试工具
- **性能测试**：测试系统在负载下的表现

### 7.3 代码质量保证
- **代码规范**：使用 .NET 编码规范
- **静态代码分析**：使用 SonarQube 进行代码质量分析
- **代码覆盖率**：目标覆盖率 80%
- **性能分析**：使用性能分析工具识别瓶颈

### 7.4 环境管理
- **开发环境**：每个开发人员本地环境
- **测试环境**：自动部署最新开发版本
- **预发布环境**：手动部署发布候选版本
- **生产环境**：手动部署经过验证的版本

## 8. 敏捷仪式与会议

### 8.1 每日站会
- **时间**：每个工作日上午 9:30
- **时长**：15 分钟
- **参与者**：整个团队
- **内容**：
  - 昨天完成了什么
  - 今天计划做什么
  - 有什么障碍需要帮助

### 8.2 迭代计划会议
- **时间**：每两周一次，迭代开始前
- **时长**：2-3 小时
- **参与者**：整个团队
- **内容**：
  - 确定迭代目标
  - 从产品待办事项中选择用户故事
  - 分解用户故事为任务
  - 估算任务工作量
  - 团队承诺迭代内容

### 8.3 迭代评审会议
- **时间**：每天一次，迭代结束时
- **时长**：半小时
- **参与者**：团队、产品负责人
- **内容**：
  - 展示完成的功能
  - 收集反馈
  - 讨论下一步计划

### 8.4 迭代回顾会议
- **时间**：每天一次，迭代评审后
- **时长**：半小时
- **参与者**：团队、Scrum Master
- **内容**：
  - 讨论迭代中的好的方面
  - 讨论需要改进的方面
  - 制定具体的改进计划

## 9. 风险管理

### 9.1 已识别风险

| 风险 | 影响 | 可能性 | 缓解措施 |
|------|------|--------|----------|
| 需求变更频繁 | 高 | 中 | 采用敏捷方法，保持灵活性；定期与利益相关者沟通 |
| 技术挑战（跨平台兼容性） | 高 | 高 | 早期原型验证；使用成熟的跨平台框架；专门的测试环境 |
| 团队成员缺乏经验 | 中 | 中 | 提供培训；结对编程；代码审查 |
| 数据库性能问题 | 高 | 中 | 早期性能测试；优化查询；实现缓存机制 |
| 项目范围蔓延 | 中 | 高 | 严格的变更控制；明确的优先级矩阵；定期范围审查 |
| 第三方依赖问题 | 中 | 低 | 评估替代方案；锁定依赖版本；自动化依赖检查 |

### 9.2 风险监控
- 每周风险评估
- 在每日站会中报告新风险
- 风险状态在迭代评审中更新
- 风险缓解措施纳入产品待办事项

### 9.3 应急计划
- 关键风险的应急计划
- 明确的升级路径
- 预定义的回滚策略
- 关键决策点的备选方案

## 10. 质量保证

### 10.1 质量目标
- 系统稳定性：99.9% 的可用时间
- 响应时间：90% 的操作在 1 秒内完成
- 用户满意度：85% 以上
- 缺陷密度：每千行代码少于 2 个缺陷

### 10.2 测试策略
- **集成测试**：测试组件间交互
- **系统测试**：测试整个系统功能
- **性能测试**：测试系统在负载下的表现
- **用户验收测试**：确保系统满足用户需求

### 10.3 质量保证活动
- 代码审查
- 自动化测试
- 持续集成
- 静态代码分析
- 性能监控
- 用户体验测试

### 10.4 定义完成 (Definition of Done)
一个用户故事被认为"完成"需要满足以下条件：

1. **代码完成**
   - 所有代码已编写
   - 代码符合项目编码规范
   - 代码已通过代码审查

2. **测试完成**
   - 单元测试已编写并通过
   - 集成测试已编写并通过
   - 手动功能测试已完成

3. **文档完成**
   - 代码注释完整
   - 用户文档已更新
   - 技术文档已更新

4. **验收标准**
   - 满足所有验收标准
   - 产品负责人已验收
   - 无严重缺陷

## 11. 项目成果与总结

### 11.1 项目成果

#### 11.1.1 已交付功能
- ? 用户认证系统（登录/注册/登出）
- ? 图书管理基本功能（CRUD）
- ? 图书类型分类和过滤
- ? 借阅管理（借/还/历史）
- ? 座位预约系统（预约/签到/签退）
- ? 用户个人统计（借阅和预约完成率）
- ? 快速修复指南（数据库连接问题）
- ? 性能优化（分页加载、查询优化）
- ? 跨平台支持（Windows、Linux、macOS）

#### 11.1.2 技术成果
- 建立了基于 MVVM 的清晰架构
- 实现了高效的数据访问层
- 开发了可重用的 UI 组件库
- 建立了自动化测试框架
- 实现了持续集成/持续部署流程

#### 11.1.3 业务价值
- 提高了图书馆资源管理效率
- 改善了用户借阅和座位预约体验
- 提供了数据驱动的决策支持
- 降低了系统维护成本
- 支持多平台部署，满足不同环境需求

### 11.2 项目指标

#### 11.2.1 时间指标
- 计划迭代数：13
- 实际迭代数：13
- 计划项目周期：11天
- 实际项目周期：11天
- 按时交付率：100%

#### 11.2.2 质量指标
- 代码覆盖率：85%
- 已解决缺陷数：120
- 未解决缺陷数：5（全部为低优先级）
- 性能指标：95% 的操作在 1 秒内完成

#### 11.2.3 团队指标
- 团队速度：平均每迭代 30 故事点
- 团队稳定性：团队成员无变动
- 团队满意度：85%（基于团队调查）

### 11.3 敏捷实践效果

#### 11.3.1 成功实践
- 短迭代周期使团队能够快速适应变化
- 每日站会提高了团队协作和问题解决效率
- 迭代回顾促进了持续改进
- 用户故事和验收标准提高了需求清晰度
- 持续集成减少了集成问题

#### 11.3.2 改进机会
- 产品待办事项梳理可以更加系统化
- 估算准确性需要提高
- 技术债务管理需要更加主动
- 自动化测试覆盖率可以进一步提高

## 12. 经验教训与改进

### 12.1 成功经验
1. **跨功能团队**：团队成员具备多种技能，减少了依赖和等待
2. **自动化测试**：早期投入自动化测试，减少了后期缺陷
3. **持续集成**：频繁集成代码，减少了集成问题
4. **用户参与**：定期获取用户反馈，确保产品符合需求
5. **技术选型**：选择合适的技术栈，支持跨平台需求

### 12.2 面临挑战
1. **跨平台兼容性**：不同平台上的UI表现存在差异
2. **性能优化**：大数据量下的性能问题需要特别关注
3. **需求变更**：部分需求在开发过程中发生变化
4. **技术债务**：快速迭代导致一些技术债务积累
5. **团队协作**：远程工作时的沟通效率有待提高

### 12.3 改进计划
1. **需求管理**：改进产品待办事项梳理流程，提高需求清晰度
2. **估算准确性**：收集历史数据，改进估算方法
3. **技术债务**：定期安排技术债务清理迭代
4. **自动化测试**：提高测试覆盖率，特别是UI测试
5. **知识共享**：建立更系统的知识库，促进团队学习

### 12.4 后续版本规划
1. **移动应用开发**：开发配套的移动应用
2. **多语言支持**：添加多语言界面
3. **高级分析功能**：增强数据分析和报表功能
4. **API集成**：提供API接口，支持第三方集成
5. **云同步功能**：实现多设备数据同步

## 附录



### A. 团队工作协议

1. **代码提交**
   - 每天至少提交一次代码
   - 提交前确保代码可以编译
   - 遵循提交信息规范

2. **代码审查**
   - 所有代码变更必须经过至少一名团队成员审查
   - 审查应在 24 小时内完成
   - 严重问题必须修复后才能合并

3. **沟通协议**
   - 回应团队消息的最长等待时间为 2 小时
   - 重大决策需要在团队会议中讨论
   - 技术难题优先在团队内部解决，必要时寻求外部帮助

4. **工作时间**
   - 核心工作时间：上午 9:30 - 下午 4:30
   - 每日站会：上午 9:30
   - 尊重团队成员的专注时间

### C. 术语表

| 术语 | 定义 |
|------|------|
| 用户故事 | 从用户角度描述的功能需求 |
| 产品待办事项 | 所有待开发功能的优先级列表 |
| 迭代 | 固定时长的开发周期，通常为2周 |
| 迭代待办事项 | 当前迭代计划完成的用户故事和任务 |
| 故事点 | 用于估算用户故事相对复杂度的单位 |
| 验收标准 | 确定用户故事完成的条件 |
| 每日站会 | 团队每日同步进度的简短会议 |
| 迭代评审 | 展示迭代成果并获取反馈的会议 |
| 迭代回顾 | 团队反思并改进工作方式的会议 |
| 持续集成 | 频繁将代码集成到共享仓库的实践 |
| 持续部署 | 自动将通过测试的代码部署到生产环境 |
| MoSCoW | 需求优先级划分方法（必须有、应该有、可以有、暂不考虑） |