<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:InkHouse.ViewModels"
        xmlns:local="clr-namespace:InkHouse.Views"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="InkHouse.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="InkHouse - å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ"
        Width="1200" Height="800"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <local:MenuCheckedConverter x:Key="MenuCheckedConverter"/>
    </Window.Resources>

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ä¾§è¾¹æ  -->
        <Border Classes="sidebar" Grid.Column="0">
            <StackPanel Margin="16">
                <!-- Logo -->
                <TextBlock Classes="title" Text="InkHouse" Margin="0,0,0,32"/>
                
                <!-- å¯¼èˆªèœå• -->
                <RadioButton GroupName="Menu" Classes="nav-item" Content="ðŸ“Š ä»ªè¡¨æ¿" Margin="0,0,0,8" IsChecked="{Binding SelectedMenu, Converter={StaticResource MenuCheckedConverter}, ConverterParameter=Dashboard, Mode=TwoWay}" Command="{Binding ShowDashboardCommand}"/>
                <RadioButton GroupName="Menu" Classes="nav-item" Content="ðŸ“šå›¾ä¹¦ç®¡ç†" Margin="0,0,0,8" IsChecked="{Binding SelectedMenu, Converter={StaticResource MenuCheckedConverter}, ConverterParameter=BookManagement, Mode=TwoWay}" Command="{Binding ShowBookManagementCommand}"/>
                <RadioButton GroupName="Menu" Classes="nav-item" Content="ðŸ‘¥ç”¨æˆ·ç®¡ç†" Margin="0,0,0,8" IsChecked="{Binding SelectedMenu, Converter={StaticResource MenuCheckedConverter}, ConverterParameter=UserManagement, Mode=TwoWay}" Command="{Binding ShowUserManagementCommand}"/>
                <RadioButton GroupName="Menu" Classes="nav-item" Content="ðŸ“–å€Ÿé˜…ç®¡ç†" Margin="0,0,0,8" IsChecked="{Binding SelectedMenu, Converter={StaticResource MenuCheckedConverter}, ConverterParameter=BorrowManagement, Mode=TwoWay}" Command="{Binding ShowBorrowManagementCommand}"/>
                <RadioButton GroupName="Menu" Classes="nav-item" Content="ðŸ“ˆç»Ÿè®¡æŠ¥è¡¨" Margin="0,0,0,8" IsChecked="{Binding SelectedMenu, Converter={StaticResource MenuCheckedConverter}, ConverterParameter=Statistics, Mode=TwoWay}" Command="{Binding ShowStatisticsCommand}"/>
                <RadioButton GroupName="Menu" Classes="nav-item" Content="âš™ï¸ç³»ç»Ÿè®¾ç½®" Margin="0,0,0,8" IsChecked="{Binding SelectedMenu, Converter={StaticResource MenuCheckedConverter}, ConverterParameter=Settings, Mode=TwoWay}" Command="{Binding ShowSettingsCommand}"/>
                
                <Rectangle Classes="divider" Margin="0,24"/>
                
                <!-- ç”¨æˆ·ä¿¡æ¯ -->
                <StackPanel>
                    <TextBlock Classes="caption" Text="å½“å‰ç”¨æˆ·"/>
                    <TextBlock Classes="label" Text="ç®¡ç†å‘˜" FontWeight="600"/>
                    <Button Classes="nav-item" Content="ðŸšª é€€å‡ºç™»å½•" Margin="0,8,0,0" Command="{Binding LogoutCommand}"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <Border Classes="navbar" Grid.Row="0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" Classes="subtitle" Text="ä»ªè¡¨æ¿" 
                               HorizontalAlignment="Left" VerticalAlignment="Center"/>
                    
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12">
                        <TextBox Classes="search" Watermark="æœç´¢..." Width="300"/>
                        <Button Classes="tool" Content="ðŸ””"/>
                        <Button Classes="tool" Content="âš™ï¸"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ä¸»è¦å†…å®¹ -->
            <ContentControl Grid.Row="1" Content="{Binding CurrentView}" Name="MainContentControl"/>
        </Grid>
    </Grid>
</Window>
